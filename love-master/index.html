<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Love forever!</title>
<link rel="shortcut icon" href="love.ico" type="image/x-icon" /> 
<link href="css/default.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/garden.js"></script>
<script type="text/javascript" src="js/functions.js"></script>
</head>
<body>
<div id="mainDiv">
	<div id="content">
		<div id="code">
			<span class="comments">/** 我与 小婵婵 携手走过的一周年</span><br>
        <span class="space"><span class="comments">*main.swift </span></span><br>
        <span class="space"><span class="comments">*Created by liuhanhao on 2018/10/30.</span></span><br>
        <span class="comments">*/</span></span><br>
    
        <span class="say">public class 你 {</span><BR>
        <span class="say tab">var 名字:String // 王丽婵</span><BR>
        <span class="say tab">init(name:String) {</span><BR>
        <span class="say tab2">名字 = name </span><BR>       
        <span class="say tab">} </span><BR>
        <span class="say">} </span><BR>
        
        <span class="say">public class 我 {</span><BR>
        <span class="say tab">static let 我的老婆:String = "你系私有，全局唯Ⅰ，不可更改继承啲"</span><BR>
        <span class="say tab">static let 漂亮等级:String = "世界上最漂亮啲"</span><BR>
        <span class="say tab">static let 可爱等级:String = "世界上最可爱啲"</span><BR>
        <span class="say tab">static let 善良等级:String = "世界上最善良啲"</span><BR>
        <span class="say tab">static let 对我的意义:String = "你系我Ⅰ生最爱啲人"</span><BR>
        <span class="say tab">fileprivate var 老婆:你</span><BR>
        <span class="say tab">init(女朋友:你) {</span><BR>
        <span class="say tab2">self.老婆 = 女朋友</span><BR>       
        <span class="say tab">} </span><BR>
        <span class="say">} </span><BR>
        
        <span class="say">public class 我的姐姐 {</span><BR>
        <span class="say tab">func 介绍(女朋友:你) -> 我 {</span><BR>
        <span class="say tab2">return 我(女朋友:女朋友) </span><BR>       
        <span class="say tab">} </span><BR>
        <span class="say">} </span><BR>
        
        <span class="say">public class 你的闺蜜 {</span><BR>
        <span class="say tab">func 介绍() -> 你 {</span><BR>
        <span class="say tab2">return 你(name: "王丽婵") </span><BR>       
        <span class="say tab">} </span><BR>
        <span class="say">} </span><BR>
        
        <span class="say">...... </span><BR>
        
        <span class="say">let 王丽婵:你 = 你的闺蜜().介绍()</span><BR>
        <span class="say">let 刘汉浩:我 = 我的姐姐().介绍(女朋友:王丽婵)</span><BR>
        <span class="say">var 我的年龄:Int = 27</span><BR>
        <span class="say">while 我的年龄 < 1314 {</span><BR>
        <span class="say tab">let 我爱你 = true</span><BR> 
        <span class="say tab">print(我爱你)</span><BR> 
        <span class="say tab">我的年龄 += 1</span><BR> 
        <span class="say">} </span><BR>
        
        <span class="say">print("希望能就这样平平静静啲牵你手，Ⅰ直走。")</span><BR>
        <span class="say">print("谢谢你走进我的世界，也让我走入你的世界 -- 永远爱你的浩。")</span><BR>
		</div>
		<div id="loveHeart">
			<canvas id="garden"></canvas>
			<div id="words">
				<div id="messages">
					亲爱的，这是我们相爱在一起的时光。
					<div id="elapseClock"></div>
				</div>
				<div id="loveu">
					爱你直到永永远远。<br/>
					<div class="signature">-----</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div style="display:none">
	<audio id="bgmusic" autoplay preload loop controls></audio>
	<!--<audio controls="controls" autoplay="autoplay" id="bgmusic">
		<source src="http://www.w3school.com.cn/i/song.ogg" type="audio/ogg">
		<source src="Let-us-marry.mp3" type="audio/mpeg">
	</audio>-->
</div>
<script type="text/javascript">
var offsetX = $("#loveHeart").width() / 2;
var offsetY = $("#loveHeart").height() / 2 - 55;
var together = new Date();
together.setFullYear(2011, 10, 19);
together.setHours(20);
together.setMinutes(0);
together.setSeconds(0);
together.setMilliseconds(0);

if (!document.createElement('canvas').getContext) {
	var msg = document.createElement("div");
	msg.id = "errorMsg";
	msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+"; 
	document.body.appendChild(msg);
	$("#code").css("display", "none")
	$("#copyright").css("position", "absolute");
	$("#copyright").css("bottom", "10px");
	document.execCommand("stop");
} else {
	setTimeout(function () {
		startHeartAnimation();
	}, 5000);

	timeElapse(together);
	setInterval(function () {
		timeElapse(together);
	}, 500);

	adjustCodePosition();
	$("#code").typewriter();
}


(function() {
        function log(info) {
            console.log(info);
            // alert(info);
        }
        function forceSafariPlayAudio() {
            audioEl.load(); // iOS 9   还需要额外的 load 一下, 否则直接 play 无效
            audioEl.play(); // iOS 7/8 仅需要 play 一下
        }
        var audioEl = document.getElementById('bgmusic');
        // 可以自动播放时正确的事件顺序是
        // loadstart
        // loadedmetadata
        // loadeddata
        // canplay
        // play
        // playing
        // 
        // 不能自动播放时触发的事件是
        // iPhone5  iOS 7.0.6 loadstart
        // iPhone6s iOS 9.1   loadstart -> loadedmetadata -> loadeddata -> canplay
        audioEl.addEventListener('loadstart', function() {
            log('loadstart');
        }, false);
        audioEl.addEventListener('loadeddata', function() {
            log('loadeddata');
        }, false);
        audioEl.addEventListener('loadedmetadata', function() {
            log('loadedmetadata');
        }, false);
        audioEl.addEventListener('canplay', function() {
            log('canplay');
        }, false);
        audioEl.addEventListener('play', function() {
            log('play');
            // 当 audio 能够播放后, 移除这个事件
            window.removeEventListener('touchstart', forceSafariPlayAudio, false);
        }, false);
        audioEl.addEventListener('playing', function() {
            log('playing');
        }, false);
        audioEl.addEventListener('pause', function() {
            log('pause');
        }, false);
        // 由于 iOS Safari 限制不允许 audio autoplay, 必须用户主动交互(例如 click)后才能播放 audio,
        // 因此我们通过一个用户交互事件来主动 play 一下 audio.
        window.addEventListener('touchstart', forceSafariPlayAudio, false);
				
        audioEl.src = 'Let-us-marry.mp3';
    })();

</script>
</body>
</html>